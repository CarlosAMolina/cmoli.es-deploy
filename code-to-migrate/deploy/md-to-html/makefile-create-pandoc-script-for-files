DOCKER_IMAGE_NAME=$(DOCKER_IMAGE_NAME)

run: create-docker-volumes copy-files-to-volumes run-container wait-container-ends

create-docker-volumes:
	docker volume create pandoc
	docker volume create nginx-web-content

run-container:
	docker run \
		-it \
		--rm \
		-d \
		--name python-create-pandoc-script-container \
		--mount type=volume,source=pandoc,target=/pandoc \
		--mount type=volume,source=nginx-web-content,target=/nginx-web-content \
		python-create-pandoc-script

# TODO the `md-to-html` folder must only convert content, the responsability for copying web content must be outside this folder.
copy-files-to-volumes:
	#sudo /bin/bash copy-files-to-docker-volumes pandoc nginx-web-content
	cd .. && /bin/bash copy-files-to-docker-volumes nginx-web-content pandoc

wait-container-ends:
	cd .. && /bin/bash wait-while-container-is-running \
		python-create-pandoc-script-container

connect:
	docker exec -it python-create-pandoc-script-container /bin/sh

stop:
	docker stop python-create-pandoc-script-container
